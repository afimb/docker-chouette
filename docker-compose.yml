version: '2'
services:
  chouette-postgres:
    build: postgres
    image: afimb/chouette-postgres
    ports: 
     - "5433:5432"
    environment:
     -  POSTGRES_PASSWORD=chouette
     -  POSTGRES_USER=chouette
    volumes:
     - ./data/postgresql:/var/lib/postgresql/data
  mailcatcher:
    image: tophfr/mailcatcher:0.6.4
    ports:
     - "1080:80"
     - "1025:25"
  chouette-iev:
    build: iev
    image: afimb/chouette-iev
    ports:
     - "8081:8080"
     - "9991:9990"
    volumes:
     - ./data/referentials:/opt/jboss/referentials
    links:
     - chouette-postgres:chouette-postgres
  chouette2:
    build: chouette2
    image: afimb/chouette2
    ports:
     - "3000:3000"
    volumes:
     - ./data/referentials:/home/chouette/referentials
    environment:
     - smtp_delivery_method=smtp
     - smtp_host=smtp
     - smtp_port=25
     - smtp_domain=
     - smtp_user_name=
     - smtp_password=
     - smtp_authentication=
     - TZ=Europe/Paris
    links:
     - mailcatcher:smtp
     - chouette-iev:chouette-iev
     - chouette-postgres:chouette-postgres

